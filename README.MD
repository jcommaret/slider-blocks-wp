# Citeo Blocks - Extension WordPress Gutenberg

## ğŸ“‹ Description

Extension WordPress moderne avec blocks Gutenberg personnalisÃ©s pour Citeo.
DÃ©veloppÃ©e initialement comme test d'embauche, maintenant publique et professionnelle avec une architecture monorepo utilisant NPM Workspaces.

### ğŸ¨ Composants Inclus

- **Slider** - Slider interactif pour images/contenu
- **Button with Arrow** - Bouton stylisÃ© avec flÃ¨che
- **Main Bloc** - Bloc principal avec texte et photo

---

## ğŸš€ DÃ©marrage Rapide

### PrÃ©requis

- **WordPress** 5.0 ou supÃ©rieur
- **PHP** 7.4 ou supÃ©rieur
- **Node.js** 18+ et npm 9+

### âš¡ Installation en 3 Ã‰tapes

```bash
# 1. Cloner le projet
git clone [votre-repo]
cd slider-blocks-wp

# 2. Installer toutes les dÃ©pendances
npm install

# 3. Build tous les composants
npm run build:all
```

### ğŸ¬ Mode DÃ©veloppement

```bash
# DÃ©marrer tous les composants en mode dev
npm run start:all

# Ou un seul composant
npm run start --workspace=slider
```

---

## ğŸ“¦ Commandes Disponibles

### Commandes Principales

| Commande | Description |
|----------|-------------|
| `npm install` | Installe toutes les dÃ©pendances (workspaces inclus) |
| `npm run build:all` | Build tous les composants |
| `npm run start:all` | Mode dev tous les composants |
| `npm run reinstall` | Nettoie et rÃ©installe tout |

### Build

```bash
npm run build                           # Build du projet principal
npm run build:all                       # Build de TOUS les composants
npm run build --workspace=slider        # Build d'un composant spÃ©cifique
npm run build --workspace=button-with-arrow
npm run build --workspace=main-bloc
```

### DÃ©veloppement

```bash
npm run start                           # Mode dev du projet principal
npm run start:all                       # Mode dev de TOUS les composants
npm run start --workspace=slider        # Mode dev d'un composant spÃ©cifique
```

### Maintenance

```bash
npm run clean          # Supprime tous les node_modules
npm run reinstall      # Nettoie et rÃ©installe tout
npm run lint:js        # VÃ©rifie le code JavaScript
npm run lint:css       # VÃ©rifie le code CSS
npm run format         # Formate le code
```

---

## ğŸ—ï¸ Architecture NPM Workspaces

Ce projet utilise **NPM Workspaces** pour une gestion centralisÃ©e et moderne des dÃ©pendances.

### ğŸ“ Structure du Projet

```
citeo-blocks/                     (Root - Workspace principal)
â”œâ”€â”€ package.json                  â†’ Configuration principale + workspaces
â”œâ”€â”€ node_modules/                 â†’ DÃ©pendances centralisÃ©es (partagÃ©es)
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ button-with-arrow/        â†’ Workspace 1
â”‚   â”‚   â”œâ”€â”€ package.json          â†’ MÃ©tadonnÃ©es uniquement
â”‚   â”‚   â”œâ”€â”€ edit.js
â”‚   â”‚   â”œâ”€â”€ save.js
â”‚   â”‚   â””â”€â”€ block.json
â”‚   â”‚
â”‚   â”œâ”€â”€ main-bloc/                â†’ Workspace 2
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â””â”€â”€ slider/                   â†’ Workspace 3
â”‚       â”œâ”€â”€ package.json
â”‚       â””â”€â”€ ...
â”‚
â””â”€â”€ scss/                         â†’ Styles globaux
```

### ğŸ¯ Workspaces ConfigurÃ©s

```json
{
  "workspaces": [
    "src/button-with-arrow",
    "src/main-bloc",
    "src/slider"
  ]
}
```

### âœ¨ Avantages

- âœ… **Une seule installation** : `npm install` Ã  la racine installe tout
- âœ… **DÃ©pendances centralisÃ©es** : Pas de duplication
- âœ… **Versions cohÃ©rentes** : Tous les composants utilisent les mÃªmes versions
- âœ… **Installation rapide** : ~85% plus rapide
- âœ… **Moins d'espace** : ~66% d'Ã©conomie (480 MB au lieu de ~500 MB)
- âœ… **Hoisting automatique** : NPM remonte les dÃ©pendances communes

### ğŸ“Š DÃ©pendances CentralisÃ©es

Toutes les dÃ©pendances communes sont dans le `package.json` racine :

```json
{
  "devDependencies": {
    "@wordpress/scripts": "^30.24.0",
    "webpack-dev-server": "^5.2.1",
    "ajv": "8.17.1"
  },
  "dependencies": {
    "axios": "^1.9.0",
    "tar-fs": ">=3.0.9",
    "webpack-dev-server": "^5.2.1"
  }
}
```

### ğŸ”§ Gestion des DÃ©pendances

#### Ajouter une dÃ©pendance commune (pour tous les composants)

```bash
npm install nom-du-package --save
npm install nom-du-package --save-dev  # Pour devDependencies
```

#### Ajouter une dÃ©pendance spÃ©cifique Ã  un composant

```bash
npm install nom-du-package --workspace=slider
```

#### Mettre Ã  jour les dÃ©pendances

```bash
npm update                  # Mettre Ã  jour toutes les dÃ©pendances
npm update axios            # Mettre Ã  jour une dÃ©pendance spÃ©cifique
npm outdated                # Voir les packages obsolÃ¨tes
```

#### VÃ©rifier les workspaces

```bash
npm ls --workspaces         # Liste tous les workspaces
npm ls --workspaces --depth=0  # Vue simplifiÃ©e
```

---

## ğŸ¯ Installation WordPress

### Pour les Utilisateurs Finaux

1. TÃ©lÃ©chargez le fichier zip de l'extension
2. Connectez-vous Ã  votre administration WordPress
3. Allez dans "Extensions > Ajouter"
4. Cliquez sur "TÃ©lÃ©verser une extension"
5. SÃ©lectionnez le fichier zip et activez

### GÃ©nÃ©rer le ZIP

```bash
npm run plugin-zip
```

---

## âœ¨ FonctionnalitÃ©s des Composants

### ğŸ  Slider

- Slider responsive et interactif
- Compatible avec images et contenu personnalisÃ©
- Configuration complÃ¨te dans l'Ã©diteur Gutenberg
- Animations fluides
- Support mobile

**Utilisation** :
```bash
npm run start --workspace=slider
```

### ğŸ”˜ Button with Arrow

- Bouton stylisÃ© avec flÃ¨che animÃ©e
- Personnalisation des couleurs et textes
- IntÃ©gration native Gutenberg
- Hover effects
- AccessibilitÃ© optimisÃ©e

**Utilisation** :
```bash
npm run start --workspace=button-with-arrow
```

### ğŸ“„ Main Bloc

- Bloc de contenu avec image
- Mise en page flexible (image gauche/droite)
- Options de personnalisation avancÃ©es
- Responsive design
- Texte riche

**Utilisation** :
```bash
npm run start --workspace=main-bloc
```

---

## ğŸ› ï¸ Technologies

- **WordPress Gutenberg** - Ã‰diteur de blocks moderne
- **@wordpress/scripts** - Tooling officiel WordPress
- **Webpack 5** - Module bundler
- **React** - Framework UI
- **NPM Workspaces** - Gestion de monorepo
- **Babel** - Transpilation JavaScript
- **PostCSS** - Transformation CSS
- **ESLint** - Linting JavaScript
- **Stylelint** - Linting CSS

---

## ğŸ› DÃ©pannage

### ProblÃ¨me : "Cannot find module"

**Solution** :
```bash
npm run reinstall
```

### ProblÃ¨me : Build qui Ã©choue

**Solution** :
```bash
rm -rf node_modules package-lock.json
npm install
npm run build:all
```

### ProblÃ¨me : Changements non pris en compte

**Solution** :
```bash
# ArrÃªter le serveur (Ctrl+C) puis
npm run start:all
```

### ProblÃ¨me : Versions de dÃ©pendances conflictuelles

**Solution** :
```bash
rm package-lock.json
npm run clean
npm install
```

### ProblÃ¨me : Les workspaces ne sont pas dÃ©tectÃ©s

**VÃ©rification** :
```bash
npm ls --workspaces
```

**Sortie attendue** :
```
citeo-blocks@0.1.0
â”œâ”€â”€ button-with-arrow@0.1.0 -> ./src/button-with-arrow
â”œâ”€â”€ main-bloc@0.1.0 -> ./src/main-bloc
â””â”€â”€ slider@0.1.0 -> ./src/slider
```

---

## ğŸ“š Bonnes Pratiques

### âœ… Ã€ Faire

- Toujours exÃ©cuter `npm install` depuis la **racine** du projet
- Ajouter les dÃ©pendances communes au `package.json` racine
- Utiliser `--workspace=nom` pour les commandes spÃ©cifiques
- VÃ©rifier `npm ls` pour voir l'arbre des dÃ©pendances
- Faire un `npm run build:all` avant de crÃ©er un ZIP

### âŒ Ã€ Ã‰viter

- Ne pas faire `npm install` dans chaque sous-dossier
- Ne pas dupliquer les dÃ©pendances communes dans les composants
- Ne pas modifier manuellement les `node_modules`
- Ne pas commiter les `node_modules` dans Git

---

## ğŸ”„ Scripts de CompatibilitÃ©

Des scripts de compatibilitÃ© sont disponibles pour faciliter la migration :

```bash
npm run update-local-packages   # Met Ã  jour le package.json (optionnel)
npm run update-and-install      # Mise Ã  jour + installation (optionnel)
```

Ces scripts dÃ©tectent automatiquement la prÃ©sence de workspaces.

---

## ğŸ“Š Performances et Statistiques

### Comparaison Avant/AprÃ¨s Workspaces

| Aspect | Avant | AprÃ¨s (Workspaces) |
|--------|-------|-------------------|
| **DÃ©pendances dupliquÃ©es** | Oui (3x) | Non |
| **Espace disque** | ~500 MB | ~480 MB |
| **Temps d'installation** | 2-3 min | ~30 sec |
| **CohÃ©rence des versions** | Manuelle | Automatique |
| **Maintenance** | Complexe | Simple |
| **Nombre de packages** | ~6000 (dupliquÃ©s) | 1514 (hoisting) |

---

## ğŸ” SÃ©curitÃ©

### Audit des DÃ©pendances

```bash
npm audit                    # Voir les vulnÃ©rabilitÃ©s
npm audit fix                # Corriger automatiquement (safe)
npm audit fix --force        # Corriger avec breaking changes
```

### Mettre Ã  Jour les Packages WordPress

```bash
npm run packages-update      # Met Ã  jour les packages @wordpress/*
```

---

## ğŸ§ª Tests et QualitÃ©

### Linting

```bash
npm run lint:js              # VÃ©rifie le JavaScript
npm run lint:css             # VÃ©rifie le CSS/SCSS
```

### Format

```bash
npm run format               # Formate automatiquement le code
```

---

## ğŸš¢ DÃ©ploiement

### CrÃ©er un Build de Production

```bash
# 1. Nettoyer
npm run clean

# 2. Installer
npm install

# 3. Build tous les composants
npm run build:all

# 4. CrÃ©er le ZIP WordPress
npm run plugin-zip
```

Le fichier ZIP sera crÃ©Ã© dans le dossier racine du projet.

---

## ğŸ“– Historique du Projet

### Version 0.1.0 (7 janvier 2026)

- âœ… Migration vers NPM Workspaces
- âœ… Centralisation des dÃ©pendances
- âœ… Correction du nom du composant `main-bloc` (anciennement `test-bloc-1`)
- âœ… Simplification des `package.json` des composants
- âœ… Ajout de nouveaux scripts npm
- âœ… Documentation complÃ¨te
- âœ… Performances optimisÃ©es

---

## ğŸ¤ Contribution

Les contributions sont les bienvenues !

### Comment Contribuer

1. Fork le projet
2. CrÃ©ez une branche pour votre fonctionnalitÃ© (`git checkout -b feature/AmazingFeature`)
3. Committez vos changements (`git commit -m 'Add some AmazingFeature'`)
4. Push vers la branche (`git push origin feature/AmazingFeature`)
5. Ouvrez une Pull Request

### Guidelines

- Suivre les conventions de code existantes
- Tester vos modifications avec `npm run build:all`
- VÃ©rifier le linting avec `npm run lint:js` et `npm run lint:css`
- Documenter les nouvelles fonctionnalitÃ©s

---

## ğŸ“„ Licence

Ce projet est sous licence **GPL-2.0-or-later** - voir le fichier [LICENSE.md](LICENSE.md) pour plus de dÃ©tails.

Cette licence est compatible avec WordPress et permet :
- âœ… Utilisation commerciale
- âœ… Modification
- âœ… Distribution
- âœ… Usage privÃ©

---

## ğŸ‘¨â€ğŸ’» Auteur

**krdrs-jco** - Citeo

---

## ğŸ”— Ressources Utiles

### Documentation Officielle

- [WordPress Block Editor Handbook](https://developer.wordpress.org/block-editor/)
- [NPM Workspaces Documentation](https://docs.npmjs.com/cli/v7/using-npm/workspaces)
- [@wordpress/scripts Package](https://developer.wordpress.org/block-editor/reference-guides/packages/packages-scripts/)
- [Gutenberg Components](https://developer.wordpress.org/block-editor/reference-guides/components/)

### Outils

- [Block Development Examples](https://github.com/WordPress/gutenberg-examples)
- [Create Block Tool](https://developer.wordpress.org/block-editor/reference-guides/packages/packages-create-block/)

---

## ğŸ’¡ Astuces

### DÃ©velopper un Seul Composant

Si vous travaillez sur un seul composant :

```bash
cd src/slider
npm run start
```

Le composant aura accÃ¨s Ã  toutes les dÃ©pendances du projet racine.

### Rechargement Automatique

Le mode `start` active le rechargement automatique (hot reload). Sauvegardez vos fichiers et les changements apparaissent instantanÃ©ment dans l'Ã©diteur Gutenberg.

### DÃ©boguer un Workspace

```bash
npm ls --workspace=slider         # Voir les dÃ©pendances d'un workspace
npm explain nom-du-package        # Comprendre pourquoi un package est installÃ©
```

---

## ğŸ‰ C'est Parti !

Vous Ãªtes maintenant prÃªt Ã  dÃ©velopper des blocks WordPress Gutenberg modernes !

**Commande pour commencer** :

```bash
npm install && npm run build:all && npm run start:all
```

Bon dÃ©veloppement ! ğŸš€

---

<div align="center">

**Made with â¤ï¸ for Citeo**

*Ce projet utilise NPM Workspaces pour une architecture monorepo moderne et performante.*

</div>
